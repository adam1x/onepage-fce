function Course(t){this.year=t.year||"",this.section=t.section||"",this.type=t.type||"",this.courseid=t.courseid||"",this.resp_rate=t.resp_rate||"",this.semester=t.semester||"",this.name=t.name||"",this.enrollment=t.enrollment||"",this.co_taught=t.co_taught||"",this.department=t.department||"",this.responses=t.responses||"",this.instructor=t.instructor||"",this.questions=function(t){return q={},$.each(t.questions||{},function(t,e){e.body.startsWith("Q-")&&(q[e.body]=e.value)}),q}(t),this.getTable=function(){var t=[this.courseid,this.year,this.semester,this.instructor,normalizeScore(this.questions["Q-10"]),normalizeScore(this.questions["Q-09"]),normalizeScore(this.questions["Q-07"]),normalizeScore(this.questions["Q-02"]),this.questions["Q-01"],this.enrollment,this.resp_rate];return table="<tr><td>"+t.join("</td><td>")+"</td></tr>",table}}function normalizeScore(t){return Math.round(t/5*100)}function search(t){var e,s,r=t.match(/(\d{2})[-]?(\d{3})/);null!==r?e=r[1]+"-"+r[2]:s=t;var o,n="http://courseapi-scotty.rhcloud.com/fce/_search?size=50&sort=year:desc&default_operator=AND";e?o=n.concat("&q=courseid:",e):s&&(o=n.concat("&q=instructor:",s)),o&&$.getJSON(o,function(t){var e=[];try{var s=t.hits.hits;for(i in s)hit=s[i],course=new Course(hit._source),e.push(course.getTable())}finally{}$("#result-body").remove(),$("<tbody/>",{id:"result-body",html:e.join("")}).appendTo("#search-result"),$("#search-result").removeAttr("data-sortable-initialized"),Sortable.init()})}$(function(){$("#search-form").on("submit",function(t){t.preventDefault();var e=$("#search-form :input").val();search(e)})});